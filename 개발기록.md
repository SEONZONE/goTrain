
# SRT 매크로 예약 시스템 개발 진행상황

## 현재 구현된 기능
1. **Flask API 서버**
   - POST /srt: 예약 요청 API
   - GET /status/{task_id}: 상태 확인 API
   - CORS 설정 추가

2. **비동기 처리**
   - Thread 사용
   - Redis로 상태 관리
   - background_task 구현

3. **Selenium 설정**
   - Headless 모드
   - 자동 종료 처리
   - 타임아웃 설정

## 주요 코드 설명
1. **Redis 상태 관리**
```python
f"task:{task_id}"  # Redis 키 네이밍
redis_client.hset()  # 상태 저장
redis_client.hgetall()  # 상태 조회
```

2. **Flask 동적 라우팅**
```python
@app.route('/status/<task_id>')  # URL 변수 사용
```

## 다음 구현 예정
1. **영구 데이터 저장**
   - MySQL DB 연동
   - 예약 이력 관리

2. **알림 시스템**
   - 카카오 알림톡

3. **에러 처리 강화**
   - 서버 재시작 시 복구 로직
   - 예외 상황 처리

## 주의사항
- Redis 데이터는 휘발성 (서버 재시작시 손실)
- bytes 디코딩 필요
- CORS 설정 필수



# 예약 요청이후 Redis를 사용하여 상태관리
##  기본 구조
```
[클라이언트] → POST /srt → [즉시 응답 + task_id]
                   ↓
           [Redis에 상태 저장]
                   ↓
[클라이언트가 GET /status/{task_id}로 주기적 체크]

```


# 기본 플로우
```
[프론트엔드 - React]
        ↓
[웹 서버 - Node.js] → [MySQL]
        ↓
[예약 서버 - Flask/Selenium] → [Redis]
```


### GitHub Actions 배포 설정

Copy

`[GitHub Push] → [GitHub Actions] → [AWS EC2]`

필요한 설정:

- GitHub Secrets (AWS 접근 정보)
- Workflow 파일 (.github/workflows/deploy.yml)
- EC2 배포 스크립트

# TODO LIST
- [ ] Redis 기존 오래된 데이터 주기적으로 삭제 
- [ ]  AWS 서버에 배포 후 API 테스트 실시